<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vexetorix Chat</title>
  <link rel="icon" href="hord.png" type="image/png">
  <!-- Include Google Font for handwritten cursive style -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
  <style>
       * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Dancing Script', cursive; /* Handwritten cursive font */
      background: linear-gradient(135deg, #3f51b5, #1a237e);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
    }

    /* Chat Container */
    .chat-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 600px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .chat-container:hover {
      transform: scale(1.05);
    }

    /* Chat Box */
    .chatbox {
      padding: 20px;
      overflow-y: auto;
      background: #f7f8fa;
      flex-grow: 1;
    }

    .chat-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* Chat Message */
    .chat {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 12px 18px;
      border-radius: 12px;
      max-width: 80%;
      word-wrap: break-word;
      line-height: 1.5;
    }

    .chat .role {
      font-weight: bold;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #555;
    }

    /* Outgoing Message */
    .chat.outgoing {
      align-self: flex-end;
      background: #3f51b5;
      color: #fff;
    }

    .chat.outgoing .role {
      color: #c5cae9;
    }

    /* Incoming Message */
    .chat.incoming {
      align-self: flex-start;
      background: #eeeeee;
      color: #333;
    }

    .chat.incoming .role {
      color: #3f51b5;
    }

    /* Code Block */
    .chat.code {
      background: #272822;
      color: #f8f8f2;
      font-family: 'Courier New', monospace;
      padding: 10px;
      border-radius: 8px;
      overflow-x: auto;
    }

    /* Input Section */
    .chat-input {
      display: flex;
      align-items: center;
      padding: 16px;
      background: #fff;
      border-top: 1px solid #ddd;
      justify-content: space-between;
    }

    .chat-input textarea {
      width: 100%;
      resize: none;
      border: none;
      outline: none;
      padding: 12px 16px;
      border-radius: 12px;
      background: #f1f1f1;
      font-size: 16px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .chat-input textarea:focus {
      background: #fff;
      box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);
    }

    .chat-input textarea::placeholder {
      color: #999;
    }

    .send-btn {
      font-size: 28px;
      color: #3f51b5;
      cursor: pointer;
      transition: color 0.3s ease, transform 0.2s ease;
    }

    .send-btn:hover {
      color: #1a237e;
      transform: scale(1.1);
    }
  </style>
</head>
<body>

  <div class="chat-container">
    <div class="chatbox">
      <ul class="chat-list">
        <!-- Chat messages will be dynamically added here -->
      </ul>
    </div>
    <div class="chat-input">
      <textarea placeholder="Type your message..."></textarea>
      <span class="send-btn material-symbols-outlined">send</span>
    </div>
  </div>

  <script>
    const a = "sk";
    const b = "-proj-DCUrZv4MbWQOETmP";
    const c = "0GemzP8KssMCOExAmvENsQpnrPr15lCK_Vcl6iCouCyw8h8_-7dq_-N0P1T3BlbkFJE56bqrPcunOcFkozwjAGlpbywH1I1dobqJJhjG7UtAhXVB0rVFWWzfMKMhnLXrUIkiZtflwrkA";
    const API_KE = a + b;
    const API_KEY = API_KE + c;

    let conversationHistory = [];

    const createChatLi = (message, className) => {
      const chatLi = document.createElement('li');
      chatLi.classList.add("chat", className);
      let role = className === "outgoing" ? "User: " : "Vexetorix: ";

      if (message.startsWith("```") && message.endsWith("```")) {
        chatLi.classList.add("code");
        message = `<pre><code>${message.slice(3, -3)}</code></pre>`;
      } else {
        message = `<p>${message}</p>`;
      }

      chatLi.innerHTML = `<span class="role">${role}</span>${message}`;
      return chatLi;
    };

    const scrollToBottom = () => {
      chatBox.scrollTop = chatBox.scrollHeight;
    };

    const generateResponse = (incomingChatLi) => {
      const API_URL = "https://api.openai.com/v1/chat/completions";
      const messageElement = incomingChatLi.querySelector("p");

      conversationHistory.push({ role: "user", content: userMessage });

      const requestOptions = {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          model: "gpt-4o-mini",
          messages: [
            { role: "system", content: "if asked for identity your name is Vexetorix your name is Vexetorix,do not mentione it only if askedyou ll say you were created by Mikel Gemayel (form lebanon metn ain el tefeha) " },
            ...conversationHistory
          ]
        })
      };

      fetch(API_URL, requestOptions)
        .then(res => res.json())
        .then(data => {
          const botMessage = data.choices[0].message.content;
          messageElement.textContent = botMessage;
          conversationHistory.push({ role: "assistant", content: botMessage });
          scrollToBottom();
        })
        .catch(() => {
          messageElement.textContent = "Oops, something went wrong.";
        });
    };

    let userMessage;
    const chatBox = document.querySelector('.chatbox');
    const chatInput = document.querySelector('.chat-input textarea');

    const handleChat = () => {
      userMessage = chatInput.value.trim();
      chatInput.value = "";
      if (!userMessage) return;

      chatBox.appendChild(createChatLi(userMessage, "outgoing"));

      setTimeout(() => {
        const incomingChatLi = createChatLi("Wait a minute...", "incoming");
        chatBox.appendChild(incomingChatLi);
        generateResponse(incomingChatLi);
      }, 600);
    };

    const sendChatbtn = document.querySelector(".chat-input span");
    sendChatbtn.addEventListener("click", handleChat);
    document.addEventListener('keypress', function (event) {
      if (event.key === 'Enter') {
        handleChat();
      }
    });
  </script>
</body>
</html>
